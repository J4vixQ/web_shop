{"version":3,"sources":["webpack:///src/pages/Me/Children/EditPhone.vue","webpack:///./src/pages/Me/Children/EditPhone.vue?a871","webpack:///./src/pages/Me/Children/EditPhone.vue"],"names":["EditPhone","data","phone","countDown","code","computed","extends_default","Object","vuex_esm","phoneRight","test","this","methods","getVerifyCode","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","result","wrap","_context","prev","next","intervalId","setInterval","clearInterval","api","sent","console","log","err_code","element_ui_common","type","message","showClose","success_code","stop","goTo","path","$router","replace","submitEdit","_this2","_callee2","_context2","$message","abrupt","userInfo","id","$store","dispatch","user_id","error","Children_EditPhone","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","directives","name","rawName","value","expression","maxlength","placeholder","domProps","on","input","$event","target","composing","_v","disabled","_s","class","phone_right","click","preventDefault","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.3fc9e5afd838605424c0.js","sourcesContent":["<template>\n  <div id=\"edit-phone\">\n    <section class=\"edit-message\">\n      <input type=\"tel\" maxlength=\"11\" placeholder=\"手机号\" v-model=\"phone\">\n      <button\n        v-if=\"!countDown\"\n        class=\"get-verification\"\n        :class=\"{phone_right: phoneRight}\"\n        @click.prevent=\"getVerifyCode()\"\n      >\n        获取验证码\n      </button>\n      <button\n        v-else\n        disabled=\"disabled\"\n        class=\"get-verification\">\n          已发送({{countDown}}s)\n      </button>\n    </section>\n    <section class=\"edit-verification\">\n      <input type=\"tel\" maxlength=\"8\" placeholder=\"验证码\" v-model=\"code\">\n    </section>\n    <div class=\"btn-section\">\n       <el-button type=\"primary\" @click=\"goTo('/me/profile')\">返回</el-button>\n       <el-button type=\"danger\" @click=\"submitEdit\">编辑</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {mapState} from 'vuex';\n  import {mapActions} from 'vuex'\n  import { MessageBox } from 'element-ui';\n  import {getPhoneCode, changeUserPhone} from './../../../api/index';\n\n  export default {\n    data(){\n      return{\n        phone: '',\n        countDown: 0, // 倒计时\n        code: '', // 验证码\n      }\n    },\n    computed: {\n      ...mapState([\"userInfo\"]),\n      // 验证手机号是否合理\n      phoneRight() {\n        return /^[1][3,4,5,7,8][0-9]{9}$/.test(this.phone)\n      }\n    },\n    methods: {\n      // 获取短信验证码\n      async getVerifyCode() {\n        // 1 开启倒计时\n        if (this.phoneRight) {\n          this.countDown = 60;\n          this.intervalId = setInterval(() => {\n            this.countDown--;\n            // 判断\n            if (this.countDown === 0) {\n              clearInterval(this.intervalId);\n            }\n          }, 1000);\n        }\n\n        // 2 获取短信验证码\n        let result = await getPhoneCode(this.phone);\n        console.log(result);\n\n        // 3 获取验证码失败\n        if (result.err_code === 0) {\n          // 提示信息\n\t\t      MessageBox({\n            type: 'info',\n            message: result.message,\n\t\t\t      showClose: true,\n          });\n\n          // 其他处理\n          clearInterval(this.intervalId);\n          this.countDown = 0;\n        }else if(result.success_code === 200){\n\t\t\t    MessageBox({\n              type: 'info',\n              message: `验证码为:${result.message}, 短信功能暂未开通,十分抱歉对您产生的不便`,\n\t\t\t        showClose: true,\n          });\n\t\t    }\n      },\n      goTo(path){\n        this.$router.replace(path);\n      },\n      async submitEdit(){\n        if(!this.phone){\n          this.$message('手机号不得为空！');\n          return;\n        }\n        if(!this.code){\n          this.$message('验证码不得为空！');\n          return;\n        }\n        let result = await changeUserPhone(this.userInfo.id, this.phone, this.code);\n        if(result.success_code === 200){\n          this.$message({\n            message: result.message,\n            type: 'success'\n          });\n          this.$store.dispatch('getUserInfo',{user_id: this.userInfo.id});\n          this.$router.replace('/me/profile');\n        }else{\n          this.$message.error(result.message);\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  #edit-phone{\n    padding-top: 10%;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  #edit-phone input{\n    width: 100%;\n    height: 100%;\n    padding-left: 8px;\n    box-sizing: border-box;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    outline: 0;\n    font: 400 14px Arial;\n  }\n  #edit-phone input:focus{\n    border: 1px solid #409EFF;\n  }\n  .edit-message{\n    position: relative;\n    width: 300px;\n    height: 40px;\n    font-size: 14px;\n  }\n  .get-verification{\n    position: absolute;\n    top: 50%;\n    right: 10px;\n    transform: translateY(-50%);\n    border: none;\n    color: #ccc;\n    font-size: 14px;\n    background: transparent;\n  }\n  .phone_right{\n    color: rgb(64, 131, 255);\n  }\n  .edit-verification{\n    position: relative;\n    margin-top: 24px;\n    width: 300px;\n    height: 40px;\n    font-size: 14px;\n  }\n  .btn-section{\n    margin: 50px auto;\n    width: 25%;\n\n    display: flex;\n    justify-content: space-between;\n  }\n  .btn-section .el-button{\n    width: 100px;\n    outline: none;\n  }\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Me/Children/EditPhone.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"edit-phone\"}},[_c('section',{staticClass:\"edit-message\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.phone),expression:\"phone\"}],attrs:{\"type\":\"tel\",\"maxlength\":\"11\",\"placeholder\":\"手机号\"},domProps:{\"value\":(_vm.phone)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.phone=$event.target.value}}}),_vm._v(\" \"),(!_vm.countDown)?_c('button',{staticClass:\"get-verification\",class:{phone_right: _vm.phoneRight},on:{\"click\":function($event){$event.preventDefault();return _vm.getVerifyCode()}}},[_vm._v(\"\\n      获取验证码\\n    \")]):_c('button',{staticClass:\"get-verification\",attrs:{\"disabled\":\"disabled\"}},[_vm._v(\"\\n        已发送(\"+_vm._s(_vm.countDown)+\"s)\\n    \")])]),_vm._v(\" \"),_c('section',{staticClass:\"edit-verification\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.code),expression:\"code\"}],attrs:{\"type\":\"tel\",\"maxlength\":\"8\",\"placeholder\":\"验证码\"},domProps:{\"value\":(_vm.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.code=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"btn-section\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.goTo('/me/profile')}}},[_vm._v(\"返回\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.submitEdit}},[_vm._v(\"编辑\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-542578d4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Me/Children/EditPhone.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-542578d4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EditPhone.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditPhone.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditPhone.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-542578d4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./EditPhone.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-542578d4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Me/Children/EditPhone.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
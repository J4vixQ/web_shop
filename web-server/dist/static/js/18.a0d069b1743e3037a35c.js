webpackJsonp([18],{"3UQ7":function(e,r){},WrGN:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=t("Xxa5"),o=t.n(l),s=t("exGp"),a=t.n(s),i=(t("NYxO"),t("gyMJ")),n={data:function(){return{fileList:[],dialogImageUrl:"",dialogVisible:!1,ruleForm:{goods_id:null,short_name:"",goods_name:"",price:null,sales_tip:"",counts:null,category:1},rules:{goods_id:[{required:!0,message:"请输入商品ID",trigger:"blur"}],short_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_name:[{required:!0,message:"请填写商品详情",trigger:"blur"}],price:[{required:!0,message:"请输入商品特价",trigger:"blur"}],counts:[{required:!0,message:"请输入商品库存",trigger:"blur"}],category:[{required:!0,message:"请选择商品分类号",trigger:"blur"}],sales_tip:[{required:!0,message:"请输入商品标签",trigger:"blur"}]},options:[{value:1,label:"图书、音像"},{value:2,label:"家居生活"},{value:3,label:"服饰、箱包"},{value:4,label:"电子产品"},{value:5,label:"美食宝典"}]}},methods:{handleChange:function(e,r){r.length>1&&(r=r.slice(-1)),this.fileList=r},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},submitForm:function(e){var r=this;return a()(o.a.mark(function t(){var l,s,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l=!1,r.$refs[e].validate(function(t){t&&(r.$refs[e].model.goods_id=Number(r.$refs[e].model.goods_id),r.$refs[e].model.counts=Number(r.$refs[e].model.counts),r.$refs[e].model.price=Number(r.$refs[e].model.price),l=!0)}),r.fileList.length||(l=!1),!l){t.next=17;break}return(s=new FormData).append("goods_id",r.$refs[e].model.goods_id),s.append("short_name",r.$refs[e].model.short_name),s.append("goods_name",r.$refs[e].model.goods_name),s.append("counts",r.$refs[e].model.counts),s.append("price",r.$refs[e].model.price),s.append("sales_tip",r.$refs[e].model.sales_tip),s.append("category",r.$refs[e].model.category),s.append("goods_img",r.fileList[0].raw),t.next=15,Object(i.b)(s);case 15:200===(a=t.sent).success_code?(r.$message({type:"success",message:"添加成功"}),r.$router.replace("/admin"),Object(i.n)()):500===a.success_code?r.$message({type:"info",message:"商品已存在"}):r.$message({type:"error",message:"添加失败"});case 17:case"end":return t.stop()}},t,r)}))()},resetForm:function(e){this.$refs[e].resetFields()}}},u={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"addgoods"}},[t("h3",[e._v("商品上架")]),e._v(" "),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{staticStyle:{width:"250px"},attrs:{label:"商品ID",prop:"goods_id"}},[t("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.goods_id,callback:function(r){e.$set(e.ruleForm,"goods_id",r)},expression:"ruleForm.goods_id"}})],1),e._v(" "),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"商品名称",prop:"short_name"}},[t("el-input",{model:{value:e.ruleForm.short_name,callback:function(r){e.$set(e.ruleForm,"short_name",r)},expression:"ruleForm.short_name"}})],1),e._v(" "),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"商品图片"}},[t("el-upload",{attrs:{"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-change":e.handleChange,"auto-upload":!1,multiple:!1,"limit:1":"",action:"http://47.120.8.10:3000"}},[t("i",{staticClass:"el-icon-plus"})]),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(r){e.dialogVisible=r}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),t("el-form-item",{staticStyle:{width:"250px"},attrs:{label:"商品特价",prop:"price"}},[t("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.price,callback:function(r){e.$set(e.ruleForm,"price",r)},expression:"ruleForm.price"}})],1),e._v(" "),t("el-form-item",{staticStyle:{width:"250px"},attrs:{label:"商品库存",prop:"counts"}},[t("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.counts,callback:function(r){e.$set(e.ruleForm,"counts",r)},expression:"ruleForm.counts"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"商品分类",prop:"category"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.category,callback:function(r){e.$set(e.ruleForm,"category",r)},expression:"ruleForm.category"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"商品标签",prop:"sales_tip"}},[t("el-input",{model:{value:e.ruleForm.sales_tip,callback:function(r){e.$set(e.ruleForm,"sales_tip",r)},expression:"ruleForm.sales_tip"}})],1),e._v(" "),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"商品详情",prop:"goods_name"}},[t("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.ruleForm.goods_name,callback:function(r){e.$set(e.ruleForm,"goods_name",r)},expression:"ruleForm.goods_name"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var m=t("VU/8")(n,u,!1,function(e){t("3UQ7")},"data-v-15f9d2ee",null);r.default=m.exports}});
//# sourceMappingURL=18.a0d069b1743e3037a35c.js.map
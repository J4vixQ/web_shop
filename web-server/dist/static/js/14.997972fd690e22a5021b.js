webpackJsonp([14],{Fx8a:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("Xxa5"),o=e.n(a),i=e("exGp"),r=e.n(i),n=e("Dd8w"),c=e.n(n),d=e("gyMJ"),_=e("zL8q"),l=e("NYxO"),u={data:function(){return{textarea:"",rating:0,colors:["#99A9BF","#F7BA2A","#FF9900"],currentGoodsId:0,shopNum:1}},computed:c()({},Object(l.c)(["goodsDetail","userInfo","goodsComment"])),created:function(){this.currentGoodsId=Number(this.$route.params.id),this.$store.dispatch("reqGoodsDetail",{goodsNo:this.currentGoodsId}),this.$store.dispatch("reqGoodsComment",{goodsId:this.currentGoodsId})},watch:{$route:function(){this.currentGoodsId=Number(this.$route.params.id),this.$store.dispatch("reqGoodsDetail",{goodsNo:this.currentGoodsId}),this.$store.dispatch("reqGoodsComment",{goodsId:this.currentGoodsId}),this.$store.dispatch("getUserInfo")}},methods:{post:function(){var t=this;return r()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.textarea){s.next=3;break}return Object(_.MessageBox)({type:"info",message:"评论不得为空",showClose:!0}),s.abrupt("return");case 3:return s.next=5,Object(d.z)(t.goodsDetail[0].goods_id,t.textarea,t.rating,t.userInfo.id);case 5:200===s.sent.success_code?(Object(_.MessageBox)({type:"success",message:"发布成功",showClose:!0}),t.textarea="",t.$store.dispatch("reqGoodsComment",{goodsId:t.currentGoodsId})):Object(_.MessageBox)({type:"info",message:"发布失败",showClose:!0});case 7:case"end":return s.stop()}},s,t)}))()},dealWithCellBtnClick:function(t){var s=this;return r()(o.a.mark(function e(){var a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.userInfo.user_name){e.next=5;break}return e.next=3,Object(d.a)(s.userInfo.id,t.goods_id,t.short_name,t.thumb_url,t.price,s.shopNum,t.counts);case 3:200===(a=e.sent).success_code&&(Object(_.MessageBox)({type:"success",message:a.message,showClose:!0}),i=s.userInfo.id,s.$store.dispatch("reqCartsGoods",{user_id:i}),s.shopNum=1);case 5:case"end":return e.stop()}},e,s)}))()}}},v={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.goodsDetail[0]?e("div",{attrs:{id:"container"}},[e("div",{staticClass:"pro_detail"},[e("div",{staticClass:"pro_img"},[e("div",{staticClass:"tb_booth"},[e("img",{staticClass:"pro_middle_img",attrs:{src:t.goodsDetail[0].image_url}})])]),t._v(" "),e("div",{staticClass:"pro_meg"},[e("div",{staticClass:"pro_meg_hd"},[e("h1",[t._v("\n\t\t\t\t\t \t\t"+t._s(t.goodsDetail[0].goods_name)+"\n\t\t\t\t\t\t")])]),t._v(" "),e("div",{staticClass:"pro_meg_price"},[e("dl",[e("dt",[t._v("促销价")]),t._v(" "),e("dd",[e("div",{staticClass:"promo_price"},[e("span",{staticClass:"tm-price"},[t._v(t._s(t._f("moneyFormat")(t.goodsDetail[0].price/100)))]),t._v(" "),e("b",[t._v("优惠促销")])])])]),t._v(" "),e("dl",[e("dt",[t._v("市场价")]),t._v(" "),e("dd",{staticClass:"nor_price"},[t._v(t._s(t._f("moneyFormat")(t.goodsDetail[0].normal_price/100)))])]),t._v(" "),t._m(0),t._v(" "),e("dl",[e("dt",{staticClass:"sale_tip"},[t._v(t._s(t.goodsDetail[0].sales_tip))])]),t._v(" "),t._m(1)]),t._v(" "),t._m(2),t._v(" "),e("div",{staticClass:"pro_meg_console"},[e("dl",{staticClass:"tb-sku"},[e("dt",[t._v("数量")]),t._v(" "),e("dd",[e("div",{staticClass:"item-amout"},[e("el-input-number",{attrs:{min:1,max:t.goodsDetail[0].counts},model:{value:t.shopNum,callback:function(s){t.shopNum=s},expression:"shopNum"}})],1),t._v(" "),e("span",[t._v("库存")]),e("em",[t._v(t._s(t.goodsDetail[0].counts))]),e("span",[t._v("件")])])]),t._v(" "),e("div",{staticClass:"shopping_car"},[e("el-button",{attrs:{type:"danger"},on:{click:function(s){return s.preventDefault(),t.dealWithCellBtnClick(t.goodsDetail[0])}}},[t._v("加入购物车")])],1)])])]),t._v(" "),e("div",{staticClass:"pro_comment"},[e("h3",[t._v("商品评价")]),t._v(" "),t.goodsDetail[0].comments_count?e("div",t._l(t.goodsComment,function(s,a){return e("div",{key:a,staticClass:"media"},[e("div",{staticClass:"media-body"},[s.user_nickname?e("h6",{staticClass:"media-heading"},[t._v("用户: "+t._s(s.user_nickname))]):e("h6",{staticClass:"media-heading"},[t._v("用户: "+t._s(t._f("nameFormat")(s.user_name)))]),t._v(" "),e("span",[t._v("评论:")]),t._v(" "+t._s(s.comment_detail)+"\n              "),e("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900"},model:{value:s.comment_rating,callback:function(e){t.$set(s,"comment_rating",e)},expression:"comment.comment_rating"}})],1)])}),0):e("div",{staticClass:"media"},[e("div",{staticClass:"media-body"},[t._v("\n            本商品暂无评论\n          ")])])]),t._v(" "),t.userInfo.user_name?e("div",{staticClass:"pro_judge"},[e("h3",[t._v("评价该商品")]),t._v(" "),e("span",[t._v("为该商品评分")]),t._v(" "),e("el-rate",{attrs:{colors:t.colors,"show-score":"","text-color":"#ff9900"},model:{value:t.rating,callback:function(s){t.rating=s},expression:"rating"}}),t._v(" "),e("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:t.textarea,callback:function(s){t.textarea=s},expression:"textarea"}}),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.post()}}},[t._v("发布"),e("i",{staticClass:"el-icon-edit el-icon--right"})])],1):e("div",{staticClass:"pro_judge"},[e("h3",[t._v("评价该商品")]),t._v(" "),e("span",{staticClass:"judge_erro_tip"},[t._v("登录后才可发表评论")])])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("dl",[s("dt",[this._v("本店优惠")]),this._v(" "),s("dd",[this._v("包邮")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("dl",[s("dt",[this._v("服务承诺")]),this._v(" "),s("dd",[s("span",[this._v("正品保证")]),this._v(" "),s("span",[this._v("极速退货")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"pro_meg_deliver"},[s("dl",[s("dt",[this._v("运费")]),this._v(" "),s("dd",[this._v("福建福州  至  福建福州   快递:0.00")])])])}]};var m=e("VU/8")(u,v,!1,function(t){e("ZXud")},"data-v-35356d40",null);s.default=m.exports},ZXud:function(t,s){}});
//# sourceMappingURL=14.997972fd690e22a5021b.js.map